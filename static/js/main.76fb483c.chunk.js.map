{"version":3,"sources":["hooks/http.hook.js","context/AuthContext.js","pages/AuthPage.js","hooks/message.hook.js","components/Loader.js","pages/LinksList.js","pages/LinksPage.js","pages/CreatePage.js","components/LinkCard.js","pages/DetailPage.js","hooks/auth.hook.js","components/Navbar.js","App.js","routes.js","index.js"],"names":["useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","AuthContext","createContext","token","userId","login","noop","logout","isAuthenticated","AuthPage","auth","useContext","text","window","M","toast","html","email","password","form","setForm","useEffect","updateTextFields","changeHandler","event","target","name","value","registerHandler","loginHandler","console","log","className","placeholder","id","type","onChange","htmlFor","style","marginRight","disabled","onClick","Loader","display","justifyContent","paddingTop","LinksList","links","length","map","link","index","from","to","_id","LinksPage","setLinks","fetchLinks","Authorization","fetched","CreatePage","history","useHistory","setLink","pressHandler","key","push","e","onKeyPress","LinkCard","href","rel","clicks","Date","date","toLocaleDateString","DetailPage","linkId","useParams","getLink","storageName","Navbar","padding","preventDefault","App","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.76fb483c.chunk.js","sourcesContent":["import { useState, useCallback } from 'react'\n\nexport const useHttp = () => {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(null)\n\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\n    setLoading(true)\n    try {\n      if (body) {\n        body = JSON.stringify(body)\n        headers['Content-type'] = 'application/json'\n      }\n\n      const response = await fetch(url, {\n        method,\n        body,\n        headers\n      })\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Что-то пошло не так')\n      }\n\n      setLoading(false)\n      return data\n\n    } catch (e) {\n      setLoading(false)\n      setError(e.message)\n      throw e\n    }\n  }, [])\n\n  const clearError = useCallback(() => setError(null), [])\n\n  return {\n    loading,\n    request,\n    error,\n    clearError\n  }\n}","import { createContext } from 'react'\n\nfunction noop() {}\n\nexport const AuthContext = createContext({\n  token: null,\n  userId: null,\n  login: noop(),\n  logout: noop(),\n  isAuthenticated: false\n})","import React, {useContext, useEffect, useState} from 'react'\nimport {useHttp} from '../hooks/http.hook'\nimport {useMessage} from '../hooks/message.hook'\nimport {AuthContext} from '../context/AuthContext'\n\nexport const AuthPage = () => {\n  const auth = useContext(AuthContext)\n  const message = useMessage()\n  const {loading, request, error, clearError} = useHttp()\n  const [form, setForm] = useState({\n    email: '', password: ''\n  })\n\n  useEffect(() => {\n    message(error)\n    clearError()\n  }, [error, message, clearError])\n\n  useEffect(() => {\n    window.M.updateTextFields()\n  }, [])\n\n  const changeHandler = event => {\n    setForm({ ...form, [event.target.name]: event.target.value })\n  }\n\n  const registerHandler = async () => {\n    try {\n      const data = await request('/api/auth/register', 'POST', {...form})\n      message(data.message)\n    } catch (e) {}\n  }\n\n  const loginHandler = async () => {\n    try {\n      const data = await request('/api/auth/login', 'POST', {...form})\n      auth.login(data.token, data.userId)\n    } catch (e) {}\n  }\n\n  console.log('Login: sublarki@gmail.com', 'Password: 123456')\n\n  return (\n    <div className='row'>\n      <div className='col s6 offset-s3'>\n        <h1>Сократи Ссылку</h1>\n        <div className='card blue darken-1'>\n          <div className='card-content white-text'>\n            <span className='card-title'>Авторизация</span>\n            <div>\n\n              <div className='input-field'>\n                <input\n                  placeholder='Введите email'\n                  id='email'\n                  type='text'\n                  name='email'\n                  className='yellow-input'\n                  value={form.email}\n                  onChange={changeHandler}\n                />\n                <label htmlFor='email'>Email</label>\n              </div>\n\n              <div className='input-field'>\n                <input\n                  placeholder='Введите пароль'\n                  id='password'\n                  type='password'\n                  name='password'\n                  className='yellow-input'\n                  value={form.password}\n                  onChange={changeHandler}\n                />\n                <label htmlFor='email'>Пароль</label>\n              </div>\n\n            </div>\n          </div>\n          <div className='card-action'>\n            <button\n              className='btn yellow darken-4'\n              style={{marginRight: 10}}\n              disabled={loading}\n              onClick={loginHandler}\n            >\n              Войти\n            </button>\n            <button\n              className='btn grey lighten-1 black-text'\n              onClick={registerHandler}\n              disabled={loading}\n            >\n              Регистрация\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import { useCallback } from \"react\"\n\nexport const useMessage = () => {\n  return useCallback((text) => {\n    if (window.M && text) {\n      window.M.toast({html: text})\n    }\n  }, [])\n}","import React from 'react'\n\nexport const Loader = () => {\n  return (\n  <div style={{display: 'flex', justifyContent: 'center', paddingTop: '2rem'}}>\n    <div className='progress'>\n      <div className='indeterminate'></div>\n    </div>\n  </div>\n  )\n}","import React from 'react'\nimport {Link} from 'react-router-dom'\n\nexport const LinksList = ({ links }) => {\n  if (!links.length) {\n    return <p className='center'>Ссылок пока нет</p>\n  }\n  return (\n    <table className='responsive-table'>\n        <thead>\n          <tr>\n              <th>Номер</th>\n              <th>Оригинальная</th>\n              <th>Сокращенная</th>\n              <th>Открыть</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {links.map((link, index) => {\n            return (\n              <tr key={link._id}>\n                <td>{index + 1}</td>\n                <td>{link.from}</td>\n                <td>{link.to}</td>\n                <td>\n                  <Link\n                  to={`/detail/${link._id}`}\n                  >Открыть</Link>\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n  )\n}","import React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { useHttp } from '../hooks/http.hook'\nimport { AuthContext } from '../context/AuthContext'\n\nimport { Loader } from '../components/Loader'\nimport { LinksList } from './LinksList'\n\nexport const LinksPage = () => {\n  const [links, setLinks] = useState([])\n  const {loading, request} = useHttp()\n  const {token} = useContext(AuthContext)\n\n  const fetchLinks = useCallback(async () => {\n    try {\n      const fetched = await request('/api/link', 'GET', null, {\n        Authorization: `Bearer ${token}`\n      })\n      setLinks(fetched)\n    } catch (e) {}\n  }, [token, request])\n\n  useEffect(() => {\n    fetchLinks()\n  }, [])\n\n  if (loading) {\n    return <Loader />\n  }\n\n  return (\n    <>\n      {!loading && <LinksList links={links} />}\n    </>\n  )\n}","import React, { useState, useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../context/AuthContext'\nimport { useHttp } from '../hooks/http.hook'\n\nexport const CreatePage = () => {\n  const history = useHistory()\n  const auth = useContext(AuthContext)\n  const {request} = useHttp()\n  const [link, setLink] = useState('')\n\n  useEffect(() => {\n    window.M.updateTextFields()\n  }, [])\n\n  const pressHandler = async (event) => {\n    if (event.key === 'Enter') {\n      try {\n        const data = await request('/api/link/generate', 'POST', {from: link}, {\n          Authorization: `Bearer ${auth.token}`\n        })\n        history.push(`/detail/${data.link._id}`)\n      } catch (e) {}\n    }\n  }\n\n  return (\n    <div className='row'>\n      <div className='col s8 offse-s2' style={{paddingTop: '2rem'}}>\n      <input\n        placeholder='Вставьте ссылку'\n        id='link'\n        type='text'\n        value={link}\n        onChange={e => setLink(e.target.value)}\n        onKeyPress={pressHandler}\n      />\n      <label htmlFor='link'>Введите ссылку</label>\n      </div>\n    </div>\n  )\n}","import React from 'react'\n\nexport const LinkCard = ({ link }) => {\n  return (\n    <>\n      <h2>Ссылка</h2>\n      <p>Ваша ссылка: <a href={link.to} target='_blank' rel='noopener noreferrer'>{link.to}</a></p>\n      <p>Откуда: <a href={link.from} target='_blank' rel='noopener noreferrer'>{link.from}</a></p>\n      <p>Колличество кликов по ссылке: <strong>{link.clicks}</strong></p>\n      <p>Дата создания: <strong>{new Date(link.date).toLocaleDateString()}</strong></p>\n    </>\n  )\n}","import React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { AuthContext } from '../context/AuthContext'\nimport { useHttp } from '../hooks/http.hook'\n\nimport { Loader } from '../components/Loader'\nimport { LinkCard } from '../components/LinkCard'\n\nexport const DetailPage = () => {\n  const {token} = useContext(AuthContext)\n  const {request, loading} = useHttp()\n  const [link, setLink] = useState(null)\n  const linkId = useParams().id\n\n  const getLink = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/link/${linkId}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      })\n      setLink(fetched)\n    } catch (e) {}\n  }, [token, linkId, request])\n\n  useEffect(() => {\n    getLink()\n  }, [getLink])\n\n  if (loading) {\n    return <Loader />\n  }\n\n  return (\n    <>\n      { !loading && link && <LinkCard link={link}/> }\n    </>\n  )\n}","import { useState, useCallback, useEffect } from 'react'\n\nconst storageName = 'userData'\n\nexport const useAuth = () => {\n  const [token, setToken] = useState(null)\n  const [ready, setReady] = useState(false) \n  const [userId, setUserId] = useState(null)\n\n  const login = useCallback((jwtToken, id) => {\n    setToken(jwtToken)\n    setUserId(id)\n\n    localStorage.setItem(storageName, JSON.stringify({\n      userId: id,\n      token: jwtToken\n    }))\n  }, [])\n\n  const logout = useCallback(() => {\n    setToken(null)\n    setUserId(null)\n    localStorage.removeItem(storageName)\n  }, [])\n\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName))\n\n    if (data && data.token) {\n      login(data.token, data.userId)\n    }\n    setReady(true)\n  }, [login])\n\n  return { login, logout, token, userId, ready }\n}","import React, { useContext } from 'react'\nimport { NavLink, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../context/AuthContext'\n\nexport const Navbar = () => {\n  const history = useHistory()\n  const auth = useContext(AuthContext)\n\n  const logoutHandler = event => {\n    event.preventDefault()\n    auth.logout()\n    history.push('/')\n  }\n\n  return (\n    <nav>\n      <div className=\"nav-wrapper blue darken-1\" style={{ padding: '0 2rem' }}>\n        <span className=\"brand-logo\">Сокращение ссылок</span>\n        <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\n          <li><NavLink to=\"/create\">Создать</NavLink></li>\n          <li><NavLink to=\"/links\">Ссылки</NavLink></li>\n          <li><a href=\"/\" onClick={logoutHandler}>Выйти</a></li>\n        </ul>\n      </div>\n    </nav>\n  )\n}","import React from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport { useRoutes } from './routes'\nimport { useAuth } from './hooks/auth.hook'\nimport { AuthContext } from './context/AuthContext'\nimport { Navbar } from './components/Navbar'\nimport { Loader } from './components/Loader'\n\nimport 'materialize-css'\n\nfunction App() {\n  const { token, login, logout, userId, ready } = useAuth()\n  const isAuthenticated = !!token\n  const routes = useRoutes(isAuthenticated)\n\n  if (!ready) {\n    return <Loader />\n  }\n\n  return (\n    <AuthContext.Provider value={{\n      token, login, logout, userId, isAuthenticated\n    }}>\n      <Router>\n        { isAuthenticated && <Navbar /> }\n        <div className='container'>\n          {routes}\n        </div>\n      </Router>\n    </AuthContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\nimport { AuthPage } from './pages/AuthPage'\nimport { LinksPage } from './pages/LinksPage'\nimport { CreatePage } from './pages/CreatePage'\nimport { DetailPage } from './pages/DetailPage'\n\nexport const useRoutes = isAuthenticated => {\n  if (isAuthenticated) {\n    return (\n      <Switch>\n        <Route path='/links' exact>\n          <LinksPage />\n        </Route>\n        <Route path='/create' exact>\n          <CreatePage />\n        </Route>\n        <Route path='/detail/:id'>\n          <DetailPage />\n        </Route>\n        <Redirect to='/create' />\n      </Switch>\n    )\n  }\n\n  return (\n    <Switch>\n      <Route path='/' exact>\n        <AuthPage />\n      </Route>\n      <Redirect to='/'/>\n    </Switch>\n  )\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App';\n\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}